<!DOCTYPE html>
<html>
  <head>
    <title>NBA Data Visualizations</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@6.1.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@6.2.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@7.0.2"></script>
  </head>
  <body>
    <div id="vis1"></div>
    <script type="text/javascript">
      var yourV1Spec = {
        $schema: "https://vega.github.io/schema/vega-lite/v6.json",
        data: { url: "top10_players.csv" },
        title: "Top 10 Players/Teams",
        width: 300,
        height: 300,

        params: [
          {
            name: "Select",
            select: { type: "point", fields: ["Player"] },
            bind: {
              input: "select",
              options: [
                "Shai Gilgeous-Alexander",
                "Giannis Antetokounmpo",
                "Nikola Jokić",
                "Luka Dončić",
                "Anthony Edwards",
                "Jayson Tatum",
                "Kevin Durant",
                "Tyrese Maxey",
                "Cade Cunningham",
                "Jalen Brunson",
              ],
            },
          },
        ],
        mark: { type: "bar", tooltip: { content: "data" } },
        encoding: {
          x: { field: "Player", type: "nominal" },
          y: { field: "PTS", type: "quantitative" },
          tooltip: [
            { field: "PTS", type: "quantitative", title: "PPG" },
            { field: "FG%", type: "quantitative" },
            { field: "3P%", type: "quantitative" },
            { field: "MP", type: "quantitative", title: "Minutes Played" },
          ],
          color: {
            condition: {
              param: "Select",
              field: "Player",
              type: "nominal",
            },
            value: "grey",
          },
        },
      };
      vegaEmbed("#vis1", yourV1Spec);
    </script>

    <div id="vis2"></div>
    <script type="text/javascript">
      var yourV2Spec = {
        $schema: "https://vega.github.io/schema/vega-lite/v6.json",
        data: { url: "wins_losses_by_Division.csv" },
        title: "Divisional Stats", // change name !!!!!!!!!!!!!
        //width: 300,
        //height: 300,

        params: [
          {
            name: "division_selector",
            value: "Atlantic",
            bind: {
              input: "select",
              options: [
                "Atlantic",
                "Central",
                "Southeast",
                "Southwest",
                "Northwest",
                "Pacific",
              ],
              name: "Division",
            },
          },
          {
            name: "stat_selector",
            value: "W",
            bind: {
              input: "select",
              options: ["W", "L", "W/L%", "PS/G", "PA/G", "SRS"],
              name: "Stat:",
            },
          },
        ],

        transform: [
          {
            filter: "datum.Division == division_selector",
          },
          {
            calculate: "toNumber(datum[stat_selector])",
            as: "StatValue",
          },
        ],

        mark: "bar",
        encoding: {
          y: { field: "Team", type: "nominal" },

          x: { field: "StatValue", type: "quantitative" },
          color: { value: "blue" },
          tooltip: [{ field: "Team" }, { field: "StatValue", title: "Value" }],
        },
      };
      vegaEmbed("#vis2", yourV2Spec);
    </script>

    <div id="vis3"></div>
    <script type="text/javascript">
      var yourV3Spec = {
        $schema: "https://vega.github.io/schema/vega-lite/v6.json",
        data: { url: "detailed_wins_losses_for_divisions.csv" },
        title: "Divisional Record", // change name !!!!!!!!!!!!!
        width: 300,
        height: 300,

        params: [
          {
            name: "division_selector",
            value: "Atlantic",
            bind: {
              input: "select",
              options: [
                "Atlantic",
                "Central",
                "Southeast",
                "Southwest",
                "Northwest",
                "Pacific",
              ],
              name: "Division",
            },
          },
        ],

        transform: [
          {
            filter: "datum.Division == division_selector",
          },
        ],

        mark: "rect",
        encoding: {
          y: { field: "Team1", type: "nominal" },
          x: { field: "Team2", type: "nominal" },
          color: { field: "Percentage", type: "quantitative" },
          tooltip: [
            { field: "Team1", type: "nominal" },
            { field: "Team2", type: "nominal" },
            { field: "RecordForTeam1", type: "nominal" },
            { field: "Percentage", type: "quantitative" },
          ],
        },
        config: {
          axis: { grid: true, tickBand: "extent" },
        },
      };
      vegaEmbed("#vis3", yourV3Spec);
    </script>

    <div id="vis4"></div>
    <script type="text/javascript">
      var yourV4Spec = {
        // was top line of csv
        // ,,,,,,,,,,,,,,,,,,Offense Four Factors,Offense Four Factors,Offense Four Factors,Offense Four Factors,,Defense Four Factors,Defense Four Factors,Defense Four Factors,Defense Four Factors,,,,
        $schema: "https://vega.github.io/schema/vega-lite/v6.json",
        data: { url: "offensive_defensive_ratings_per_team.csv" },
        title: "Teams Offesneive vs Defensive Ratings",
        //"width": 300,
        //"height": 300,

        mark: "circle",
        selection: {
          highlight: {
            type: "single",
            on: "mouseover",
            empty: "none",
          },
        },
        encoding: {
          y: {
            field: "ORtg",
            type: "quantitative",
            title: "Offensive Rating",
            scale: { domain: [106, 123] },
          },
          x: {
            field: "DRtg",
            type: "quantitative",
            title: "Defensive Rating",
            scale: { domain: [106, 122] },
          },
          color: {
            condition: {
              selection: "highlight",
              value: "red",
            },
            value: "blue",
          },
          tooltip: [
            { field: "Team", type: "nominal" },
            { field: "ORtg", type: "quantitative" },
            { field: "DRtg", type: "quantitative" },
          ],
        },
      };
      vegaEmbed("#vis4", yourV4Spec);
    </script>

    <div id="vis5"></div>
    <script type="text/javascript">
      var yourV5Spec = {
        $schema: "https://vega.github.io/schema/vega-lite/v6.json",
        data: { url: "predicted_vs_actual_24-25.csv" },
        title: "Predicted vs Actual Win Percentage",
        //"width": 300,
        //"height": 300,

        layer: [
          {
            mark: "circle",
            selection: {
              highlight: {
                type: "single",
                on: "mouseover",
                empty: "none",
              },
            },

            encoding: {
              y: {
                field: "WinPercentage",
                type: "quantitative",
                title: "Actual Win%",
                scale: { domain: [0.2, 0.95] },
              },
              x: {
                field: "Predicted",
                type: "quantitative",
                title: "Predicted Win%",
                scale: { domain: [0.2, 0.95] },
              },
              color: {
                condition: {
                  selection: "highlight",
                  value: "red",
                },
                value: "blue",
              },
              tooltip: [
                { field: "Team", type: "nominal" },
                { field: "WinPercentage", type: "quantitative" },
                { field: "Predicted", type: "quantitative" },
              ],
            },
          },
          {
            mark: { type: "line", color: "red" },
            transform: [{ regression: "WinPercentage", on: "Predicted" }],
            encoding: {
              x: { field: "Predicted", type: "quantitative" },
              y: { field: "WinPercentage", type: "quantitative" },
            },
          },
        ],
      };
      vegaEmbed("#vis5", yourV5Spec);
    </script>
  </body>
</html>
